<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TAK</title>
    <link rel="stylesheet" href="tak.css">
</head>
<body>
<span class="name-text">
        <span>Timer</span>
        <span>Å‚</span>
</span>
<div class="timer-wrap">
    <div class="input-wrap">
        <input type="number" id="hour-value" max="99" maxlength="2" placeholder="00h">

        <label for="min-value">Minutes:</label>
        <input type="number" id="min-value" max="60" maxlength="2" placeholder="00m">

        <label for="sec-value">Seconds:</label>
        <input type="number" id="sec-value" max="60" maxlength="2" placeholder="00s">

        <button type="submit" id="submit-button">Start</button>
        <button type="reset" id="reset-button">
            <span>
                reset
            </span>
        </button>
    </div>
    <div id="timer-container"></div>
</div>
<script>

    const submit = document.getElementById("submit-button"),
        reset = document.getElementById("reset-button");
    submit.addEventListener('click', ()=>{

        const hourValue = document.getElementById("hour-value").value,
            minutValue = document.getElementById("min-value").value,
            secValue = document.getElementById("sec-value").value,
            div = document.getElementById("timer-container");
        let p = document.createElement("p")

        let timer = new Timer(+hourValue, +minutValue, +secValue, p)
        let interval = setInterval(()=> {

            //REMOVE WHEN END
            if(timer.process()){
                p.classList.add('ended')
                setTimeout(()=>{
                    p.remove()
                    clearInterval(interval)
                    timer = null
                }, 5000)
                return;
            }

        }, 1000)
        div.insertAdjacentElement('beforeend', p)

    })

    reset.addEventListener('click', ()=>{
        const div = document.getElementById("timer-container");
        
    })

    class Timer{
        constructor(hourValue = 0, minutValue = 0, secValue = 0, p) {
            this.h = hourValue;
            this.m = minutValue;
            this.s = secValue;
            this.p = p;
        }
        process(){
            this.showTime()
            this.updateTime()
            if(this.h === 0 && this.m === 0  && this.s === 0){
                return true;
            }
        }
        updateTime(){
            if(this.s >= 1){
                this.s -= 1
                return;
            }
            if(this.m >= 1){
                this.m -= 1
                this.s = 59
                return;
            }
            if(this.h >= 1){
                this.h -= 1
                this.m = 60
                return;
            }
        }
        showTime(){
            this.p.textContent = prefixNum(this.h) + ":" + prefixNum(this.m) + ":" + prefixNum(this.s)
        }
    }

    const prefixNum = (numb)=>{
        return numb < 10 ? "0" + numb : numb
    }
</script>
</body>
</html>